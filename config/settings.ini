# TalkSmith Configuration File
#
# This file contains default settings for TalkSmith transcription pipeline.
# Settings can be overridden using environment variables or CLI flags.
#
# Environment variable format: TALKSMITH_<SECTION>_<KEY>
# Example: TALKSMITH_MODELS_WHISPER_MODEL=medium.en

[Paths]
# Directory paths for inputs, outputs, and cache
input_dir = data/inputs
output_dir = data/outputs
samples_dir = data/samples
cache_dir = .cache

[Models]
# Whisper model configuration
# Available sizes: tiny, tiny.en, base, base.en, small, small.en, medium, medium.en, large-v2, large-v3
whisper_model = large-v3

# Device selection: auto, cuda, cpu
whisper_device = auto

# Compute type for CTranslate2: float16, int8, int8_float16, float32
compute_type = float16

# Diarization model from HuggingFace
diarization_model = pyannote/speaker-diarization-3.1

# Batch processing settings
batch_size = 16
num_workers = 4

[Diarization]
# Diarization mode: whisperx, alt (no-token), or off
mode = whisperx

# Voice Activity Detection threshold (0.0-1.0)
vad_threshold = 0.5

# Speaker count constraints
min_speakers = 1
max_speakers = 10

# Minimum segment length in seconds
min_segment_length = 0.5

[Export]
# Output formats: txt, json, srt, vtt (comma-separated)
formats = txt,json,srt

# Include timestamps in exports
include_timestamps = true

# Include confidence scores in exports
include_confidence = true

# Export word-level timestamps (larger files)
word_level = false

[Processing]
# Audio preprocessing options
# Enable preprocessing pipeline before transcription
enable_preprocessing = false

# Denoising: Remove background noise from audio
denoise = false
denoise_method = noisereduce  # Options: noisereduce, ffmpeg

# Loudness normalization: Normalize audio volume (EBU R128 standard, -3 dBFS target)
normalize_audio = true

# Silence trimming: Remove silence from beginning and end of audio
trim_silence = false
silence_threshold_db = -40.0  # Silence threshold in dB
min_silence_duration = 0.3    # Minimum silence duration to trim (seconds)

# High-pass filter: Remove low-frequency noise (rumble, hum)
high_pass_filter = false
hpf_cutoff = 80  # High-pass filter cutoff frequency in Hz

# Target sample rate in Hz
sample_rate = 16000

[Logging]
# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
level = INFO

# Log format: json or text
format = json

# Log directory (supports {slug} placeholder)
log_dir = data/outputs/{slug}/logs

# Output logs to console as well
console_output = true

[Sync]
# Cloud sync configuration (optional)
# Enable/disable sync functionality
enabled = false

# rclone remote name (configured via 'rclone config')
remote_name = gdrive

# Remote path on cloud storage
remote_path = TalkSmith/Transcripts

# Local path to sync (relative to project root)
local_path = data/outputs

# Automatic sync after processing
auto_sync = false

# Sync interval in minutes (for automated/scheduled sync)
sync_interval_minutes = 30
